"""
+–ë–æ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–µ–Ω—É –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞–ª—é—Ç—ã (–µ–≤—Ä–æ, –¥–æ–ª–ª–∞—Ä –∏–ª–∏ —Ä—É–±–ª—å).
+–ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –±–æ—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É pytelegrambotapi.
+–ß–µ–ª–æ–≤–µ–∫ –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É –≤ –≤–∏–¥–µ <–∏–º—è –≤–∞–ª—é—Ç—ã —Ü–µ–Ω—É –∫–æ—Ç–æ—Ä–æ–π –æ–Ω —Ö–æ—á–µ—Ç —É–∑–Ω–∞—Ç—å> <–∏–º—è –≤–∞–ª—é—Ç—ã –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–¥–æ —É–∑–Ω–∞—Ç—å —Ü–µ–Ω—É –ø–µ—Ä–≤–æ–π –≤–∞–ª—é—Ç—ã> <–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–≤–æ–π –≤–∞–ª—é—Ç—ã>.
+–ü—Ä–∏ –≤–≤–æ–¥–µ –∫–æ–º–∞–Ω–¥—ã /start –∏–ª–∏ /help –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–≤–æ–¥—è—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –±–æ—Ç–∞.
+–ü—Ä–∏ –≤–≤–æ–¥–µ –∫–æ–º–∞–Ω–¥—ã /values –¥–æ–ª–∂–Ω–∞ –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞–ª—é—Ç–∞—Ö –≤ —á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ.
+–î–ª—è –≤–∑—è—Ç–∏—è –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API (https://www.cryptocompare.com/) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫ –Ω–µ–º—É –∑–∞–ø—Ä–æ—Å—ã —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Requests.
+–î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É JSON.
-–ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–≤–µ–¥–µ–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–ª–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –≤–∞–ª—é—Ç–∞ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–≤–µ–¥–µ–Ω–æ —á–∏—Å–ª–æ) –≤—ã–∑—ã–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ APIException —Å —Ç–µ–∫—Å—Ç–æ–º –ø–æ—è—Å–Ω–µ–Ω–∏—è –æ—à–∏–±–∫–∏.
-–¢–µ–∫—Å—Ç –ª—é–±–æ–π –æ—à–∏–±–∫–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏ –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ —Å–æ–æ–±—â–µ–Ω–∏—è.
+–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –æ–ø–∏—Å–∞—Ç—å –∫–ª–∞—Å—Å —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –º–µ—Ç–æ–¥–æ–º get_price(), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç—Ä–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞: –∏–º—è –≤–∞–ª—é—Ç—ã, —Ü–µ–Ω—É –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –Ω–∞–¥–æ —É–∑–Ω–∞—Ç—å, ‚Äî base, –∏–º—è –≤–∞–ª—é—Ç—ã, —Ü–µ–Ω—É –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–¥–æ —É–∑–Ω–∞—Ç—å, ‚Äî quote, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–¥–∏–º–æ–π –≤–∞–ª—é—Ç—ã ‚Äî amount –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω—É–∂–Ω—É—é —Å—É–º–º—É –≤ –≤–∞–ª—é—Ç–µ.
+–¢–æ–∫–µ–Ω telegramm-–±–æ—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º –∫–æ–Ω—Ñ–∏–≥–µ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .py —Ñ–∞–π–ª).
+–í—Å–µ –∫–ª–∞—Å—Å—ã —Å–ø—Ä—è—Ç–∞—Ç—å –≤ —Ñ–∞–π–ª–µ extensions.py.
"""

import telebot
import extensions
from tkn_config import token, list_valute

mybot=telebot.TeleBot(token)
@mybot.message_handler(commands=['start'])
def start_message(message):
  mybot.send_message(message.chat.id,"–ü—Ä–∏–≤–µ—Ç ‚úåÔ∏è\n–ü—Ä–∏—à–ª–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏.\n\n*üëç –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:*\nUSD RUB 100", parse_mode='Markdown')


@mybot.message_handler(commands=['help'])
def start_message(message):
  mybot.send_message(message.chat.id,"–î–∞–Ω–Ω—ã–π –±–æ—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è *–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç—ã*.\n–ó–∞–ø—Ä–æ—Å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏—Å—ã–ª–∞—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º –≤–∏–¥–µ:\n<–∏–º—è –≤–∞–ª—é—Ç—ã —Ü–µ–Ω—É –∫–æ—Ç–æ—Ä–æ–π –æ–Ω —Ö–æ—á–µ—Ç —É–∑–Ω–∞—Ç—å> <–∏–º—è –≤–∞–ª—é—Ç—ã –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–¥–æ —É–∑–Ω–∞—Ç—å —Ü–µ–Ω—É –ø–µ—Ä–≤–æ–π –≤–∞–ª—é—Ç—ã> <–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–≤–æ–π –≤–∞–ª—é—Ç—ã>\n\n*üëç –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:*\nUSD RUB 100", parse_mode='Markdown')


@mybot.message_handler(commands=['values'])
def start_message(message):
  mybot.send_message(message.chat.id,"üí∞ –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –º–µ–∂–¥—É —Å–æ–±–æ–π –º–æ–∂–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –≤–∞–ª—é—Ç—ã:\n\nüî∑*USD* - –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä\nüî∑*EUR* - –µ–≤—Ä–æ\nüî∑*RUB* - —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å\n", parse_mode='Markdown')


@mybot.message_handler(content_types=['text'])
def get_text_messages(message):
    try:
        list_of_value = message.text.split()
        if len(list_of_value) != 3:
            raise extensions.APIExtension('‚ùå –í–≤–µ–¥–µ–Ω–æ –Ω–µ–≤–µ—Ä–Ω–æ–µ —á–∏—Å–ª–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤!')
        if list_of_value[0].upper() not in list_valute:
            raise extensions.APIExtension('‚ùå –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç—ã {} –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞!\n–î–æ—Å—Ç—É–ø–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å –≤–∞–ª—é—Ç –º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã /values'.format(list_of_value[0]))
        if list_of_value[1].upper() not in list_valute:
            raise extensions.APIExtension('‚ùå –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç—ã {} –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞!\n–î–æ—Å—Ç—É–ø–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å –≤–∞–ª—é—Ç –º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã /values'.format(list_of_value[1]))
        if not list_of_value[2].isdigit():
            raise extensions.APIExtension('‚ùå {} –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º!'.format(list_of_value[2]))
        cur_price = extensions.CryptoComp.get_prices(list_of_value[0].upper(), list_of_value[1].upper(), int(list_of_value[2]))
        text_for_msg = '–î–ª—è –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏—è *' + list_of_value[2] + ' ' + list_of_value[0].upper() + '*\n–í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è *' + str(cur_price) + ' ' + list_of_value[1].upper() + '*'
        mybot.send_message(message.chat.id, text=text_for_msg, parse_mode='MarkDown')
        mybot.send_message(message.chat.id, text='–ü—Ä–∏—à–ª–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏.\n\n*üëç –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:*\nUSD RUB 100', parse_mode='MarkDown')
    except extensions.APIExtension as ae:
        mybot.send_message(message.chat.id, text=ae, parse_mode='MarkDown')
        mybot.send_message(message.chat.id, text='–ü—Ä–∏—à–ª–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏.\n\n*üëç –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:*\nUSD RUB 100', parse_mode='MarkDown')

    


if __name__ == '__main__':
    mybot.infinity_polling()